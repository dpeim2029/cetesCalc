import ReactMarkdown from "react-markdown"
import remarkGfm from "remark-gfm"
import Link from "next/link"
import { Button } from "@/components/ui/button"
import { Home, ArrowLeft } from "lucide-react"

export const metadata = {
  title: "¬øCu√°nto pagan los CETES? C√°lculo del rendimiento neto (incluye ISR)",
  description:
    "Aprende a estimar el rendimiento bruto y neto de los CETES: f√≥rmula de precio, tasa anualizada, retenci√≥n de ISR y ejemplos pr√°cticos. Incluye CTA a la calculadora del Home.",
  alternates: {
    canonical: "https://www.cetes.app/educacion/cuanto-pagan-los-cetes-rendimiento-neto-isr",
  },
  openGraph: {
    title: "¬øCu√°nto pagan los CETES? C√°lculo del rendimiento neto (incluye ISR)",
    description:
      "F√≥rmula de precio de CETES, rendimiento anualizado, retenci√≥n ISR y ejemplos. CTA a la calculadora del Home.",
    type: "article",
    url: "https://www.cetes.app/educacion/cuanto-pagan-los-cetes-rendimiento-neto-isr",
  },
  twitter: {
    card: "summary_large_image",
    title: "¬øCu√°nto pagan los CETES? C√°lculo del rendimiento neto (incluye ISR)",
    description:
      "F√≥rmula de precio de CETES, rendimiento anualizado, retenci√≥n ISR y ejemplos. CTA a la calculadora del Home.",
  },
}

const content = [
  "# ¬øCu√°nto pagan los CETES? C√°lculo del **rendimiento neto** (incluye ISR)",
  "",
  "> En esta gu√≠a aprender√°s a:",
  "> - Entender la **tasa de rendimiento** que ves en subastas.",
  "> - Pasar de **tasa ‚Üí precio** y viceversa.",
  "> - Estimar tu **rendimiento neto** considerando la **retenci√≥n de ISR**.",
  "> - Usar la **calculadora** del Home para obtener n√∫meros r√°pidos.",
  "",
  "---",
  "",
  "## Antes de empezar: tres ideas clave",
  "",
  "- Los **CETES** son t√≠tulos **cup√≥n cero** que se **compran con descuento** y pagan al vencimiento su **valor nominal de $10**. La ganancia es la diferencia entre lo que pagaste y esos $10.",
  "- La **tasa que ves (rendimiento anual)** se publica en cada **subasta primaria**. **Cambia semana a semana** y por **plazo** (28, 91, 182, 364 d√≠as, etc.).",
  "- El **ISR** sobre intereses tiene una **retenci√≥n anual provisional** (0.50% para 2025). No es impuesto definitivo: se ajusta en tu declaraci√≥n anual.",
  "",
  "> Consejo: si necesitas un n√∫mero **hoy**, salta al final y usa la **calculadora** del Home.",
  "",
  "---",
  "",
  "## C√≥mo se calcula el **rendimiento bruto**",
  "",
  "### De la **tasa anual** al **precio** (por t√≠tulo de $10)",
  "",
  "Para un CETE a *t* d√≠as con **tasa de rendimiento anual** *r* (base 360), el **precio** *P* por t√≠tulo de **$10** se obtiene con:",
  "",
  "```",
  "P = 10 / (1 + r * t / 360)",
  "```",
  "",
  "- **Ganancia bruta al vencimiento** = 10 ‚àí P",
  "- **Rendimiento del periodo sobre lo invertido** = (10 ‚àí P) / P",
  "- **Equivalente del periodo con simple** ‚âà r * t / 360 (la diferencia con (10 ‚àí P)/P suele ser peque√±a en tasas t√≠picas)",
  "",
  "> Ejemplo (ilustrativo):",
  "> **Plazo 91 d√≠as**, **r = 7.60% anual**.",
  "> y = r * t / 360 = 0.076 * 91 / 360 ‚âà 0.0192",
  "> P ‚âà 10 / (1 + 0.0192) = 9.813",
  "> **Ganancia** ‚âà 10 ‚àí 9.813 = 0.187 por t√≠tulo.",
  "> **Rendimiento del periodo sobre lo invertido** ‚âà 0.187 / 9.813 = 1.91%.",
  "",
  "---",
  "",
  "## C√≥mo estimar el **rendimiento neto** (incluye ISR)",
  "",
  "La **retenci√≥n** de ISR sobre intereses para **2025** es **0.50% anual**. Operativamente, equivale a descontar aprox. esa tasa sobre el **saldo promedio** durante el periodo. Para una estimaci√≥n r√°pida:",
  "",
  "**Aproximaci√≥n pr√°ctica:**",
  "- **Rendimiento neto anual aprox.** ‚âà **r bruta ‚àí 0.50%**",
  "- **Rendimiento neto del periodo** ‚âà (r ‚àí 0.005) * t / 360",
  "",
  "> Ejemplo (ilustrativo):",
  "> **Plazo 364 d√≠as**, **r = 7.90%**.",
  "> **Bruto anual** = 7.90%.",
  "> **Neto anual aprox.** = 7.90% ‚àí 0.50% = **7.40%**.",
  "> **Neto del periodo** ‚âà 0.074 * 364 / 360 = **7.48%** (aprox.).",
  "> **Precio bruto** P ‚âà 10 / (1 + 0.079 * 364 / 360).",
  "> Para una **ganancia neta** m√°s realista, descuenta del resultado la **retenci√≥n proporcional** (0.50% * d√≠as/365 sobre el saldo promedio).",
  "",
  "> Importante: la **retenci√≥n** es **provisional**; tu **impuesto definitivo** lo determina tu declaraci√≥n anual. Esta gu√≠a solo te ayuda a **estimar**.",
  "",
  "---",
  "",
  "## Ejemplos r√°pidos (tasas **supuestas**)",
  "",
  "> **Solo a modo de ejemplo**. Consulta tasas actuales en tu plataforma o en la **calculadora** del Home.",
  "",
  "### Caso A: 28 d√≠as, r = 7.30%",
  "- y = 0.073 * 28 / 360 = 0.00567",
  "- P ‚âà 10 / 1.00567 = 9.9437",
  "- **Bruto periodo** ‚âà (10 ‚àí 9.9437) / 9.9437 = **0.57%**",
  "- **Neto aprox.**: (0.073 ‚àí 0.005) * 28 / 360 = **0.53%**",
  "",
  "### Caso B: 91 d√≠as, r = 7.60%",
  "- y = 0.076 * 91 / 360 = **0.0192**",
  "- P ‚âà **9.813**",
  "- **Bruto periodo** ‚âà **1.91%**",
  "- **Neto aprox.**: (0.076 ‚àí 0.005) * 91 / 360 = **1.79%**",
  "",
  "> *Tip:* En horizontes **largos** (364 d√≠as), la diferencia entre **bruto** y **neto** se acerca a **0.5 puntos** anuales (por la retenci√≥n). En **plazos cortos**, el impacto es peque√±o.",
  "",
  "---",
  "",
  "## ¬øY si vendo **antes** del vencimiento?",
  "",
  "Puedes vender anticipadamente (seg√∫n reglas de tu plataforma) a **precio de mercado**. Tu resultado efectivo puede ser **mayor o menor** al estimado si las tasas **bajan o suben** respecto al d√≠a que compraste.",
  "Para **Ahorro Recurrente/Domiciliaci√≥n** suelen existir **restricciones** m√≠nimas de tiempo antes de poder vender.",
  "",
  "---",
  "",
  "## Calcula tu **rendimiento neto** con un clic",
  "",
  "üëâ **Usa la calculadora del Home** para ver **bruto vs. neto** seg√∫n **monto**, **plazo** y **tasa** (incluye la **retenci√≥n**).",
].join("\n")

const ctaContent = `
[**üßÆ Abrir calculadora**](/)

---

## Preguntas frecuentes (FAQ)

### ¬øEl rendimiento que veo en "subastas" ya es anual?
S√≠. La **tasa de rendimiento** publicada es **anual** (base 360). Para un plazo t, el **factor del periodo** es r * t / 360.

### ¬øPor qu√© el precio que pago no es $10?
Porque los CETES se **compran con descuento** y al vencimiento te pagan **$10** por t√≠tulo. La diferencia es tu **ganancia bruta**.

### ¬øLa retenci√≥n del 0.50% es mi impuesto final?
No. Es **provisional**. Se acredita en tu **declaraci√≥n anual** y el impuesto **definitivo** depende de tu situaci√≥n fiscal.

### En plazos cortos, ¬øla retenci√≥n casi no afecta?
Correcto. En **28 d√≠as**, la retenci√≥n proporcional es muy peque√±a; en **364 d√≠as**, el impacto se aproxima a **0.5 puntos** anuales.

### ¬øD√≥nde veo las tasas m√°s recientes?
En tu plataforma y en los **resultados de subasta** oficiales. Tambi√©n puedes usar la **calculadora** del Home para ver **bruto vs. neto**.

---

## Nota legal
Contenido **informativo y educativo**. No constituye asesor√≠a financiera o fiscal personalizada. Verifica siempre tasas y reglas vigentes antes de invertir.
`

export default function Page() {
  const jsonLdArticle = {
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    headline: "¬øCu√°nto pagan los CETES? C√°lculo del rendimiento neto (incluye ISR)",
    description:
      "Gu√≠a para estimar el rendimiento bruto y neto de los CETES: f√≥rmula de precio, tasa anualizada, retenci√≥n de ISR y ejemplos pr√°cticos.",
    author: { "@type": "Person", name: "cetes.app" },
    publisher: { "@type": "Organization", name: "cetes.app" },
    datePublished: "2025-09-03",
    dateModified: "2025-09-03",
    mainEntityOfPage: {
      "@type": "WebPage",
      "@id": "https://www.cetes.app/educacion/cuanto-pagan-los-cetes-rendimiento-neto-isr",
    },
  }

  const jsonLdFaq = {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    mainEntity: [
      {
        "@type": "Question",
        name: "¬øEl rendimiento que veo en subastas ya es anual?",
        acceptedAnswer: {
          "@type": "Answer",
          text: "S√≠. La tasa de rendimiento publicada es anual (base 360). Para un plazo t, el factor del periodo es r * t / 360.",
        },
      },
      {
        "@type": "Question",
        name: "¬øPor qu√© el precio que pago no es $10?",
        acceptedAnswer: {
          "@type": "Answer",
          text: "Porque los CETES se compran con descuento y al vencimiento te pagan $10 por t√≠tulo. La diferencia es tu ganancia bruta.",
        },
      },
      {
        "@type": "Question",
        name: "¬øLa retenci√≥n del 0.50% es mi impuesto final?",
        acceptedAnswer: {
          "@type": "Answer",
          text: "No. Es provisional. Se acredita en tu declaraci√≥n anual y el impuesto definitivo depende de tu situaci√≥n fiscal.",
        },
      },
      {
        "@type": "Question",
        name: "En plazos cortos, ¬øla retenci√≥n casi no afecta?",
        acceptedAnswer: {
          "@type": "Answer",
          text: "Correcto. En 28 d√≠as, la retenci√≥n proporcional es muy peque√±a; en 364 d√≠as, el impacto se aproxima a 0.5 puntos anuales.",
        },
      },
      {
        "@type": "Question",
        name: "¬øD√≥nde veo las tasas m√°s recientes?",
        acceptedAnswer: {
          "@type": "Answer",
          text: "En tu plataforma y en los resultados de subasta oficiales. Tambi√©n puedes usar la calculadora del Home para ver bruto vs. neto.",
        },
      },
    ],
  }

  return (
    <div className="min-h-screen bg-background">
      {/* Header */}
      <header className="border-b border-border bg-card">
        <div className="container mx-auto px-4 py-6">
          <div className="flex items-center justify-between">
            <div className="flex items-center gap-3">
              <Link href="/educacion">
                <Button variant="ghost" size="sm">
                  <ArrowLeft className="h-4 w-4 mr-2" />
                  Educaci√≥n
                </Button>
              </Link>
            </div>
            <Button variant="outline" asChild>
              <Link href="/">
                <Home className="h-4 w-4 mr-2" />
                Inicio
              </Link>
            </Button>
          </div>
        </div>
      </header>

      {/* Article Content */}
      <main className="container mx-auto px-4 py-8">
        <article className="max-w-4xl mx-auto prose prose-lg dark:prose-invert prose-headings:text-foreground prose-p:text-foreground prose-li:text-foreground prose-strong:text-foreground prose-blockquote:text-muted-foreground prose-blockquote:border-l-primary">
          <ReactMarkdown remarkPlugins={[remarkGfm]}>{content}</ReactMarkdown>

          {/* CTA Section */}
          <div className="not-prose bg-gradient-to-r from-primary/10 to-primary/5 border border-primary/20 rounded-lg p-6 my-8">
            <div className="text-center space-y-4">
              <h3 className="text-xl font-bold text-primary">¬øListo para calcular tu rendimiento?</h3>
              <p className="text-muted-foreground">
                Usa nuestra calculadora para ver bruto vs. neto seg√∫n monto, plazo y tasa
              </p>
              <Link href="/#calculadora">
                <button className="bg-primary text-primary-foreground hover:bg-primary/90 px-6 py-3 rounded-lg font-medium transition-colors">
                  üßÆ Abrir calculadora
                </button>
              </Link>
            </div>
          </div>

          <ReactMarkdown remarkPlugins={[remarkGfm]}>{ctaContent}</ReactMarkdown>
        </article>
      </main>

      {/* JSON-LD */}
      <script type="application/ld+json" dangerouslySetInnerHTML={{ __html: JSON.stringify(jsonLdArticle) }} />
      <script type="application/ld+json" dangerouslySetInnerHTML={{ __html: JSON.stringify(jsonLdFaq) }} />
    </div>
  )
}
